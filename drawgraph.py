import logging
import random
from typing import List

# not all imports are currently used, but they might be in the future and it shows all available functionalities
from socha import (
    Accelerate,
    AccelerationProblem,
    Advance,
    AdvanceInfo,
    AdvanceProblem,
    Board,
    CartesianCoordinate,
    CubeCoordinates,
    CubeDirection,
    Field,
    FieldType,
    GameState,
    Move,
    Passenger,
    Push,
    PushProblem,
    Segment,
    Ship,
    TeamEnum,
    TeamPoints,
    Turn,
    TurnProblem,
)
from socha.api.networking.game_client import IClientHandler
from socha.starter import Starter

import networkx as nx
import matplotlib.pyplot as plt
from matplotlib.patches import RegularPolygon
import numpy as np

start: CubeDirection = CubeDirection.Right
directionList: List[CubeDirection] = [                 # Right -> Clockwise
    CubeDirection.Right,
    CubeDirection.DownRight,
    CubeDirection.DownLeft,
    CubeDirection.Left,
    CubeDirection.UpLeft,
    CubeDirection.UpRight
]

G = nx.DiGraph()
G.add_nodes_from([('-1;-2;3', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2022}), ('-1;-1;2', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2020}), ('-1;0;1', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2018}), ('-2;1;1', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2017}), ('-3;2;1', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2016}), ('0;-2;2', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2021}), ('0;-1;1', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2019}), ('0;0;0', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2017}), ('-1;1;0', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2016}), ('-2;2;0', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2015}), ('1;-2;1', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2020}), ('1;-1;0', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2018}), ('1;0;-1', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2016}), ('0;1;-1', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2015}), ('-1;2;-1', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2014}), ('2;-2;0', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.DownRight, 'distance': 1009}), ('2;-1;-1', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.DownRight, 'distance': 1008}), ('2;0;-2', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 0, 'direction': CubeDirection.DownRight, 'distance': 1007}), ('1;1;-2', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2014}), ('0;2;-2', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 0, 'direction': CubeDirection.Right, 'distance': 2013}), ('3;-2;-1', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.DownLeft, 'distance': 2018}), ('3;-1;-2', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.DownLeft, 'distance': 2016}), ('3;0;-3', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 1, 'direction': CubeDirection.DownLeft, 'distance': 2014}), ('2;1;-3', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.DownRight, 'distance': 1006}), ('1;2;-3', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.Right, 'distance': 2012}), ('4;-2;-2', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.DownLeft, 'distance': 2017}), ('4;-1;-3', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': None, 'distance': 9999999999}), ('4;0;-4', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': True, 'segment': 1, 'direction': None, 'distance': 9999999999}), ('3;1;-4', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.Right, 'distance': 2006}), ('2;2;-4', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.DownRight, 'distance': 1005}), ('5;-2;-3', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.Left, 'distance': 4036}), ('5;-1;-4', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': None, 'distance': 9999999999}), ('5;0;-5', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.DownRight, 'distance': 1001}), ('4;1;-5', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 1, 'direction': CubeDirection.DownRight, 'distance': 1002}), ('3;2;-5', {'field_type': FieldType.Passenger, 'passengerDirection': CubeDirection.Left, 'stream': False, 'segment': 1, 'direction': None, 'distance': 9999999999}), ('6;-2;-4', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.DownRight, 'distance': 4010}), ('6;-1;-5', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.DownLeft, 'distance': 2004}), ('6;0;-6', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.DownLeft, 'distance': 2002}), ('5;1;-6', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 1, 'direction': CubeDirection.DownRight, 'distance': 1000}), ('4;2;-6', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 1, 'direction': CubeDirection.DownRight, 'distance': 1001}), ('6;1;-7', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.DownLeft, 'distance': 2000}), ('5;2;-7', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.DownRight, 'distance': 999}), ('4;3;-7', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 2, 'direction': CubeDirection.DownRight, 'distance': 1000}), ('3;3;-6', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.DownRight, 'distance': 1002}), ('2;3;-5', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.DownRight, 'distance': 1004}), ('6;2;-8', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.DownLeft, 'distance': 1998}), ('5;3;-8', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.DownRight, 'distance': 998}), ('4;4;-8', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 2, 'direction': CubeDirection.Right, 'distance': 499}), ('3;4;-7', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.Right, 'distance': 500}), ('2;4;-6', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.Right, 'distance': 501}), ('6;3;-9', {'field_type': FieldType.Passenger, 'passengerDirection': CubeDirection.DownLeft, 'stream': False, 'segment': 2, 'direction': None, 'distance': 9999999999}), ('5;4;-9', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.Right, 'distance': 498}), ('4;5;-9', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': True, 'segment': 2, 'direction': None, 'distance': 9999999999}), ('3;5;-8', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': None, 'distance': 9999999999}), ('2;5;-7', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': None, 'distance': 9999999999}), ('6;4;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.DownRight, 'distance': 248}), ('5;5;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.DownLeft, 'distance': 484}), ('4;6;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 2, 'direction': CubeDirection.DownRight, 'distance': 241}), ('3;6;-9', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.DownRight, 'distance': 240}), ('2;6;-8', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 2, 'direction': CubeDirection.Right, 'distance': 482}), ('6;5;-11', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.DownRight, 'distance': 247}), ('5;6;-11', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': None, 'distance': 9999999999}), ('4;7;-11', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 3, 'direction': CubeDirection.DownRight, 'distance': 240}), ('3;7;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.DownRight, 'distance': 239}), ('2;7;-9', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.Right, 'distance': 480}), ('6;6;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.DownRight, 'distance': 246}), ('5;7;-12', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': None, 'distance': 9999999999}), ('4;8;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 3, 'direction': CubeDirection.DownLeft, 'distance': 119}), ('3;8;-11', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.DownRight, 'distance': 238}), ('2;8;-10', {'field_type': FieldType.Passenger, 'passengerDirection': CubeDirection.UpLeft, 'stream': False, 'segment': 3, 'direction': None, 'distance': 9999999999}), ('6;7;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.DownLeft, 'distance': 122}), ('5;8;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.DownLeft, 'distance': 121}), ('4;9;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.DownLeft, 'distance': 120}), ('3;9;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 3, 'direction': CubeDirection.DownLeft, 'distance': 118}), ('2;9;-11', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': None, 'distance': 9999999999}), ('6;8;-14', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.Left, 'distance': 244}), ('5;9;-14', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.Left, 'distance': 242}), ('4;10;-14', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.Left, 'distance': 240}), ('3;10;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 3, 'direction': CubeDirection.DownLeft, 'distance': 119}), ('2;10;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 3, 'direction': CubeDirection.DownLeft, 'distance': 117}), ('3;11;-14', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.Left, 'distance': 238}), ('2;11;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.DownLeft, 'distance': 118}), ('1;11;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 4, 'direction': CubeDirection.DownLeft, 'distance': 116}), ('1;10;-11', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.DownRight, 'distance': 234}), ('1;9;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.DownRight, 'distance': 235}), ('2;12;-14', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': None, 'distance': 9999999999}), ('1;12;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.Left, 'distance': 58}), ('0;12;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 4, 'direction': CubeDirection.Left, 'distance': 57}), ('0;11;-11', {'field_type': FieldType.Passenger, 'passengerDirection': CubeDirection.DownLeft, 'stream': False, 'segment': 4, 'direction': None, 'distance': 9999999999}), ('0;10;-10', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': None, 'distance': 9999999999}), ('1;13;-14', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.Left, 'distance': 57}), ('0;13;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.Left, 'distance': 56}), ('-1;13;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 4, 'direction': CubeDirection.Left, 'distance': 55}), ('-1;12;-11', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.Left, 'distance': 56}), ('-1;11;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.DownLeft, 'distance': 28}), ('0;14;-14', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.UpLeft, 'distance': 114}), ('-1;14;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.UpLeft, 'distance': 112}), ('-2;14;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 4, 'direction': CubeDirection.UpLeft, 'distance': 110}), ('-2;13;-11', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.Left, 'distance': 54}), ('-2;12;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 4, 'direction': CubeDirection.DownLeft, 'distance': 27}), ('-1;15;-14', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.Left, 'distance': 56}), ('-2;15;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.Left, 'distance': 55}), ('-3;15;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 5, 'direction': CubeDirection.Left, 'distance': 54}), ('-3;14;-11', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': None, 'distance': 9999999999}), ('-3;13;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.DownLeft, 'distance': 26}), ('-2;16;-14', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.Left, 'distance': 57}), ('-3;16;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.Left, 'distance': 56}), ('-4;16;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 5, 'direction': CubeDirection.UpLeft, 'distance': 27}), ('-4;15;-11', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.UpLeft, 'distance': 26}), ('-4;14;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.Left, 'distance': 12}), ('-3;17;-14', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.Left, 'distance': 58}), ('-4;17;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.UpLeft, 'distance': 28}), ('-5;17;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.UpRight, 'distance': 56}), ('-5;16;-11', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': True, 'segment': 5, 'direction': None, 'distance': 9999999999}), ('-5;15;-10', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': None, 'distance': 9999999999}), ('-4;18;-14', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.UpLeft, 'distance': 29}), ('-5;18;-13', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.UpRight, 'distance': 58}), ('-6;18;-12', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.UpLeft, 'distance': 31}), ('-6;17;-11', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 5, 'direction': CubeDirection.UpLeft, 'distance': 30}), ('-6;16;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 5, 'direction': CubeDirection.Left, 'distance': 14}), ('-7;18;-11', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': None, 'distance': 9999999999}), ('-7;17;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.UpLeft, 'distance': 28}), ('-7;16;-9', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 6, 'direction': CubeDirection.Left, 'distance': 13}), ('-6;15;-9', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': None, 'distance': 9999999999}), ('-5;14;-9', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.Left, 'distance': 11}), ('-8;18;-10', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.Left, 'distance': 16}), ('-8;17;-9', {'field_type': FieldType.Passenger, 'passengerDirection': CubeDirection.UpRight, 'stream': False, 'segment': 6, 'direction': None, 'distance': 9999999999}), ('-8;16;-8', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 6, 'direction': CubeDirection.Left, 'distance': 12}), ('-7;15;-8', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.Left, 'distance': 11}), ('-6;14;-8', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.Left, 'distance': 10}), ('-9;18;-9', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.UpLeft, 'distance': 7}), ('-9;17;-8', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.UpLeft, 'distance': 6}), ('-9;16;-7', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.UpLeft, 'distance': 5}), ('-8;15;-7', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 6, 'direction': CubeDirection.Left, 'distance': 10}), ('-7;14;-7', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.Left, 'distance': 9}), ('-10;18;-8', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.UpRight, 'distance': 14}), ('-10;17;-7', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.UpRight, 'distance': 12}), ('-10;16;-6', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.UpRight, 'distance': 10}), ('-9;15;-6', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 6, 'direction': CubeDirection.UpLeft, 'distance': 4}), ('-8;14;-6', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 6, 'direction': CubeDirection.Left, 'distance': 8}), ('-10;15;-5', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpRight, 'distance': 8}), ('-9;14;-5', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpLeft, 'distance': 3}), ('-8;13;-5', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': True, 'segment': 7, 'direction': CubeDirection.Left, 'distance': 6}), ('-7;13;-6', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.Left, 'distance': 7}), ('-6;13;-7', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.Left, 'distance': 8}), ('-10;14;-4', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpRight, 'distance': 6}), ('-9;13;-4', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpLeft, 'distance': 2}), ('-8;12;-4', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': True, 'segment': 7, 'direction': None, 'distance': 9999999999}), ('-7;12;-5', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': None, 'distance': 9999999999}), ('-6;12;-6', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpLeft, 'distance': 10}), ('-10;13;-3', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpRight, 'distance': 4}), ('-9;12;-3', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpLeft, 'distance': 1}), ('-8;11;-3', {'field_type': FieldType.Island, 'passengerDirection': None, 'stream': True, 'segment': 7, 'direction': None, 'distance': 9999999999}), ('-7;11;-4', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpLeft, 'distance': 1}), ('-6;11;-5', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.Left, 'distance': 4}), ('-10;12;-2', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpRight, 'distance': 2}), ('-9;11;-2', {'field_type': FieldType.Goal, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpLeft, 'distance': 0}), ('-8;10;-2', {'field_type': FieldType.Goal, 'passengerDirection': None, 'stream': True, 'segment': 7, 'direction': CubeDirection.UpLeft, 'distance': 0}), ('-7;10;-3', {'field_type': FieldType.Goal, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.UpLeft, 'distance': 0}), ('-6;10;-4', {'field_type': FieldType.Water, 'passengerDirection': None, 'stream': False, 'segment': 7, 'direction': CubeDirection.Left, 'distance': 2})])

colors = []
labels = []
distances = []
directions = []
hcoord = []
vcoord = []

for n in G.nodes:
    coords3 = n.split(';')
    cube = CubeCoordinates(int(coords3[0]), int(coords3[1]))

    if G.nodes[n]['field_type'] == FieldType.Water:
        passenger = False
        for v in directionList:
            v_n = ';'.join(str(x) for x in cube.plus(v.vector()).coordinates())
            try:
                if G.nodes[v_n]['field_type'] == FieldType.Passenger and G.nodes[v_n]['passengerDirection'] == v.opposite():
                    colors.append(["pink"])
                    passenger = True
                    break
            except:
                pass
        
        if not passenger:
            if not G.nodes[n]['stream']:
                colors.append(["blue"])
            else:
                colors.append(["turquoise"])
        
    elif G.nodes[n]['field_type'] == FieldType.Goal:
        colors.append(["gold"])
    elif G.nodes[n]['field_type'] == FieldType.Island:
        colors.append(["green"])
    elif G.nodes[n]['field_type'] == FieldType.Passenger:
        colors.append(["red"])

    labels.append(n)
    if G.nodes[n]['distance'] < 9999999999:
        distances.append(G.nodes[n]['distance'])
    else:
        distances.append('inf')
    directions.append(G.nodes[n]['direction'])

    q = int(coords3[0])
    r = int(coords3[1])
    s = int(coords3[2])

    #print(cube, cube.x(), cube.y())

    #hcoord.append(int(coords3[2]))
    #vcoord.append(2. * np.sin(np.radians(30)) * (int(coords3[1]) - int(coords3[0])) /3.)

    hcoord.append(2. * np.sin(np.radians(60)) * (q-s) /3.)
    vcoord.append(r)

fig, ax = plt.subplots(1)
ax.set_aspect('equal')

for x, y, c, l, d, d2 in zip(hcoord, vcoord, colors, labels, distances, directions):
    color = c[0]
    hex = RegularPolygon((x, y), numVertices=6, radius=2. / 3., 
                         orientation=np.radians(0), 
                         facecolor=color, alpha=0.2, edgecolor='k')
    ax.add_patch(hex)
    
    if d2 != None: # direction
        ax.text(x, y, '---->', ha='center', va='center', size=12, rotation = (6 - directionList.index(d2)) * 60, color='indigo')

    ax.text(x, y-0.3, l, ha='center', va='center', size=7) # coord
    ax.text(x, y+0.2, d, ha='center', va='center', size=8) # distance

# Also add scatter points in hexagon centres
ax.scatter(hcoord, vcoord, c=[c[0] for c in colors], alpha=0.5)

plt.gca().invert_yaxis()
plt.show()
